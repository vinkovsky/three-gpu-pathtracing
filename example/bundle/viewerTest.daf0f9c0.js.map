{"mappings":"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","sources":["example/viewerTest.js","node_modules/three/examples/jsm/libs/stats.module.js"],"sourcesContent":["import {\n\tACESFilmicToneMapping,\n\tNoToneMapping,\n\tLoadingManager,\n\tWebGLRenderer,\n\tScene,\n\tPerspectiveCamera,\n\tMeshBasicMaterial,\n\tsRGBEncoding,\n\tCustomBlending,\n\tEquirectangularReflectionMapping,\n\tMathUtils,\n\tBufferAttribute,\n\tGroup,\n} from 'three';\nimport { MeshoptDecoder } from 'three/examples/jsm/libs/meshopt_decoder.module.js';\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { GUI } from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport Stats from 'three/examples/jsm/libs/stats.module.js';\nimport { PathTracingSceneWorker } from '../src/workers/PathTracingSceneWorker.js';\nimport { PhysicalPathTracingMaterial, PathTracingRenderer, MaterialReducer } from '../src/index.js';\nimport { FullScreenQuad } from 'three/examples/jsm/postprocessing/Pass.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport * as BufferGeometryUtils from 'three/examples/jsm/utils/BufferGeometryUtils.js';\nimport * as MikkTSpace from 'three/examples/jsm/libs/mikktspace.module.js';\n\nconst CONFIG_URL = 'https://raw.githubusercontent.com/google/model-viewer/master/packages/render-fidelity-tools/test/config.json';\nconst BASE_URL = 'https://raw.githubusercontent.com/google/model-viewer/master/packages/render-fidelity-tools/test/config/';\n\nconst urlParams = new URLSearchParams( window.location.search );\nconst maxSamples = parseInt( urlParams.get( 'samples' ) ) || - 1;\nconst hideUI = urlParams.get( 'hideUI' ) === 'true';\nconst tiles = parseInt( urlParams.get( 'tiles' ) ) || 2;\nconst scale = parseInt( urlParams.get( 'scale' ) ) || 1;\n\nconst params = {\n\n\tenvironmentIntensity: 1.0,\n\tmultipleImportanceSampling: true,\n\tacesToneMapping: true,\n\ttilesX: tiles,\n\ttilesY: tiles,\n\tsamplesPerFrame: 1,\n\tscale: scale,\n\n\tmodel: '',\n\tcheckerboardTransparency: true,\n\n\tenable: true,\n\tbounces: 10,\n\ttransmissiveBounces: 10,\n\tpause: false,\n\n\tdisplayImage: false,\n\timageMode: 'overlay',\n\timageOpacity: 1.0,\n\timageType: 'dspbr-pt',\n\n};\n\nlet creditEl, loadingEl, samplesEl, containerEl, imgEl;\nlet gui, stats, sceneInfo;\nlet renderer, camera;\nlet ptRenderer, fsQuad, controls, scene;\nlet loadingModel = false;\nlet delaySamples = 0;\nlet models;\n\ninit();\n\nasync function init() {\n\n\t// get elements\n\tcreditEl = document.getElementById( 'credits' );\n\tloadingEl = document.getElementById( 'loading' );\n\tsamplesEl = document.getElementById( 'samples' );\n\tcontainerEl = document.getElementById( 'container' );\n\timgEl = document.querySelector( 'img' );\n\n\tif ( hideUI ) {\n\n\t\tcontainerEl.style.background = 'transparent';\n\t\tdocument.body.style.background = 'transparent';\n\n\t}\n\n\t// init renderer\n\trenderer = new WebGLRenderer( { antialias: true } );\n\trenderer.outputEncoding = sRGBEncoding;\n\trenderer.toneMapping = ACESFilmicToneMapping;\n\trenderer.physicallyCorrectLights = true;\n\tcontainerEl.appendChild( renderer.domElement );\n\n\t// init scene\n\tscene = new Scene();\n\n\t// init camera\n\tconst aspect = window.innerWidth / window.innerHeight;\n\tcamera = new PerspectiveCamera( 60, aspect, 0.01, 500 );\n\tcamera.position.set( - 1, 0.25, 1 );\n\n\t// init path tracer\n\tptRenderer = new PathTracingRenderer( renderer );\n\tptRenderer.camera = camera;\n\tptRenderer.alpha = true;\n\tptRenderer.material = new PhysicalPathTracingMaterial();\n\tptRenderer.tiles.set( params.tiles, params.tiles );\n\tptRenderer.material.setDefine( 'FEATURE_MIS', Number( params.multipleImportanceSampling ) );\n\tptRenderer.tiles.set( params.tilesX, params.tilesY );\n\n\n\t// init fsquad\n\tfsQuad = new FullScreenQuad( new MeshBasicMaterial( {\n\t\tmap: ptRenderer.target.texture,\n\t\tblending: CustomBlending\n\t} ) );\n\n\t// init controls\n\tcontrols = new OrbitControls( camera, containerEl );\n\tcontrols.addEventListener( 'change', resetRenderer );\n\n\t// init stats\n\tstats = new Stats();\n\tif ( ! hideUI ) {\n\n\t\tcontainerEl.appendChild( stats.dom );\n\n\t} else {\n\n\t\tcreditEl.remove();\n\t\tsamplesEl.remove();\n\n\t}\n\n\t// init models\n\tconst { scenarios } = await ( await fetch( CONFIG_URL ) ).json();\n\tmodels = {};\n\tscenarios.forEach( s => {\n\n\t\tmodels[ s.name ] = s;\n\n\t} );\n\n\tlet initialModel = scenarios[ 0 ].name;\n\tif ( window.location.hash ) {\n\n\t\tconst modelName = window.location.hash.substring( 1 ).replaceAll( '%20', ' ' );\n\t\tif ( modelName in models ) {\n\n\t\t\tinitialModel = modelName;\n\n\t\t}\n\n\t}\n\n\tparams.model = initialModel;\n\n\tupdateModel();\n\n\tanimate();\n\n}\n\nfunction animate() {\n\n\trequestAnimationFrame( animate );\n\n\tif ( ptRenderer.samples >= maxSamples && maxSamples !== - 1 ) {\n\n\t\treturn;\n\n\t}\n\n\tstats.update();\n\n\timgEl.style.display = ! params.displayImage ? 'none' : 'inline-block';\n\timgEl.style.opacity = params.imageMode === 'side-by-side' ? 1.0 : params.imageOpacity;\n\timgEl.style.position = params.imageMode === 'side-by-side' ? 'initial' : 'absolute';\n\timgEl.style.width = renderer.domElement.style.width;\n\timgEl.style.height = renderer.domElement.style.height;\n\n\tif ( loadingModel ) {\n\n\t\treturn;\n\n\t}\n\n\tif ( ptRenderer.samples < 1.0 || ! params.enable ) {\n\n\t\trenderer.render( scene, camera );\n\n\t}\n\n\tif ( params.enable && delaySamples === 0 ) {\n\n\t\tconst samples = Math.floor( ptRenderer.samples );\n\t\tsamplesEl.innerText = `samples: ${ samples }`;\n\n\t\tptRenderer.material.materials.updateFrom( sceneInfo.materials, sceneInfo.textures );\n\t\tptRenderer.material.filterGlossyFactor = 0.5;\n\t\tptRenderer.material.bounces = params.bounces;\n\t\tptRenderer.material.transmissiveBounces = params.transmissiveBounces;\n\t\tptRenderer.material.physicalCamera.updateFrom( camera );\n\t\tptRenderer.material.environmentIntensity = params.environmentIntensity;\n\n\t\tcamera.updateMatrixWorld();\n\n\t\tif ( ! params.pause || ptRenderer.samples < 1 ) {\n\n\t\t\tfor ( let i = 0, l = params.samplesPerFrame; i < l; i ++ ) {\n\n\t\t\t\tptRenderer.update();\n\n\t\t\t}\n\n\t\t}\n\n\t\trenderer.autoClear = false;\n\t\tfsQuad.render( renderer );\n\t\trenderer.autoClear = true;\n\n\t} else if ( delaySamples > 0 ) {\n\n\t\tdelaySamples --;\n\n\t}\n\n\tif ( ptRenderer.samples >= maxSamples && maxSamples !== - 1 ) {\n\n\t\trequestAnimationFrame( () => {\n\n\t\t\twindow.dispatchEvent( new Event( 'render-complete' ) );\n\n\t\t} );\n\n\t}\n\n\tsamplesEl.innerText = `Samples: ${ Math.floor( ptRenderer.samples ) }`;\n\n}\n\nfunction resetRenderer() {\n\n\tif ( params.tilesX * params.tilesY !== 1.0 ) {\n\n\t\tdelaySamples = 1;\n\n\t}\n\n\tptRenderer.reset();\n\n}\n\nfunction buildGui() {\n\n\tif ( hideUI ) {\n\n\t\treturn;\n\n\t}\n\n\tif ( gui ) {\n\n\t\tgui.destroy();\n\n\t}\n\n\tgui = new GUI();\n\n\tgui.add( params, 'model', Object.keys( models ) ).onChange( updateModel );\n\n\tconst pathTracingFolder = gui.addFolder( 'path tracing' );\n\tpathTracingFolder.add( params, 'enable' );\n\tpathTracingFolder.add( params, 'pause' );\n\tpathTracingFolder.add( params, 'scale', 0, 1 ).onChange( v => {\n\n\t\tconst dpr = window.devicePixelRatio;\n\t\tlet { dimensions = {} } = models[ params.model ];\n\t\tdimensions = Object.assign( {}, { width: 768, height: 768 }, dimensions );\n\n\t\tconst { width, height } = dimensions;\n\t\tptRenderer.setSize( width * dpr * v, height * dpr * v );\n\t\tptRenderer.reset();\n\n\t} );\n\tpathTracingFolder.add( params, 'multipleImportanceSampling' ).onChange( v => {\n\n\t\tptRenderer.material.setDefine( 'FEATURE_MIS', Number( v ) );\n\t\tptRenderer.reset();\n\n\t} );\n\tpathTracingFolder.add( params, 'acesToneMapping' ).onChange( v => {\n\n\t\trenderer.toneMapping = v ? ACESFilmicToneMapping : NoToneMapping;\n\n\t} );\n\tpathTracingFolder.add( params, 'bounces', 1, 20, 1 ).onChange( () => {\n\n\t\tptRenderer.reset();\n\n\t} );\n\tpathTracingFolder.add( params, 'transmissiveBounces', 1, 20, 1 ).onChange( () => {\n\n\t\tptRenderer.reset();\n\n\t} );\n\tpathTracingFolder.add( params, 'environmentIntensity', 0, 5 ).onChange( () => {\n\n\t\tptRenderer.reset();\n\n\t} );\n\n\tconst comparisonFolder = gui.addFolder( 'comparison' );\n\tcomparisonFolder.add( params, 'displayImage' );\n\tcomparisonFolder.add( params, 'imageMode', [ 'overlay', 'side-by-side' ] );\n\tcomparisonFolder.add( params, 'imageType', [\n\t\t'dspbr-pt',\n\t\t'filament',\n\t\t'babylon',\n\t\t'gltf-sample-viewer',\n\t\t'model-viewer',\n\t\t'rhodonite',\n\t\t'stellar'\n\t] ).onChange( updateImage );\n\tcomparisonFolder.add( params, 'imageOpacity', 0, 1.0 );\n\n\tconst resolutionFolder = gui.addFolder( 'resolution' );\n\tresolutionFolder.add( params, 'samplesPerFrame', 1, 10, 1 );\n\tresolutionFolder.add( params, 'tilesX', 1, 10, 1 ).onChange( v => {\n\n\t\tptRenderer.tiles.x = v;\n\n\t} );\n\tresolutionFolder.add( params, 'tilesY', 1, 10, 1 ).onChange( v => {\n\n\t\tptRenderer.tiles.y = v;\n\n\t} );\n\tresolutionFolder.open();\n\n\tconst backgroundFolder = gui.addFolder( 'background' );\n\tbackgroundFolder.add( params, 'checkerboardTransparency' ).onChange( v => {\n\n\t\tif ( v ) containerEl.classList.add( 'checkerboard' );\n\t\telse containerEl.classList.remove( 'checkerboard' );\n\n\t} );\n\n}\n\nasync function updateModel() {\n\n\tif ( gui ) {\n\n\t\tcontainerEl.classList.remove( 'checkerboard' );\n\t\tgui.destroy();\n\t\tgui = null;\n\n\t}\n\n\tlet model, envMap;\n\tconst manager = new LoadingManager();\n\tconst modelInfo = models[ params.model ];\n\n\twindow.location.hash = params.model;\n\n\tlet {\n\t\torbit = {},\n\t\ttarget = {},\n\t\tdimensions = {},\n\t} = modelInfo;\n\n\tconst {\n\t\tverticalFoV = 45,\n\t\trenderSkybox = false,\n\t\tlighting = '../../../shared-assets/environments/lightroom_14b.hdr',\n\t} = modelInfo;\n\n\torbit = Object.assign( {}, { theta: 0, phi: 90, radius: 1 }, orbit );\n\ttarget = Object.assign( {}, { x: 0, y: 0, z: 0 }, target );\n\tdimensions = Object.assign( {}, { width: 768, height: 768 }, dimensions );\n\n\t// add a minimal radius so the camera orientation is correct when radius is 0\n\torbit.radius = Math.max( orbit.radius, 1e-5 );\n\n\tloadingModel = true;\n\tcontainerEl.style.display = 'none';\n\tsamplesEl.innerText = '--';\n\tcreditEl.innerText = '--';\n\tloadingEl.innerText = 'Loading';\n\tloadingEl.style.visibility = 'visible';\n\n\tupdateImage();\n\n\tscene.traverse( c => {\n\n\t\tif ( c.material ) {\n\n\t\t\tconst material = c.material;\n\t\t\tfor ( const key in material ) {\n\n\t\t\t\tif ( material[ key ] && material[ key ].isTexture ) {\n\n\t\t\t\t\tmaterial[ key ].dispose();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\tif ( sceneInfo ) {\n\n\t\tscene.remove( sceneInfo.scene );\n\n\t}\n\n\tconst onFinish = async () => {\n\n\t\tawait MikkTSpace.ready;\n\n\t\tconst reducer = new MaterialReducer();\n\t\treducer.process( model );\n\n\t\tconst targetsToDisconnect = [];\n\t\tmodel.traverse( c => {\n\n\t\t\tif ( c.isLight && c.target ) {\n\n\t\t\t\ttargetsToDisconnect.push( c.target );\n\n\t\t\t}\n\n\t\t\tif ( c.geometry ) {\n\n\t\t\t\tif ( ! c.geometry.hasAttribute( 'normal' ) ) {\n\n\t\t\t\t\tc.geometry.computeVertexNormals();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! c.geometry.attributes.tangent ) {\n\n\t\t\t\t\tif ( c.geometry.hasAttribute( 'uv' ) ) {\n\n\t\t\t\t\t\tBufferGeometryUtils.computeMikkTSpaceTangents( c.geometry, MikkTSpace );\n\t\t\t\t\t\tc.material = c.material.clone();\n\t\t\t\t\t\tif ( c.material.normalScale ) c.material.normalScale.y *= - 1;\n\t\t\t\t\t\tif ( c.material.clearcoatNormalScale ) c.material.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tc.geometry.setAttribute(\n\t\t\t\t\t\t\t'tangent',\n\t\t\t\t\t\t\tnew BufferAttribute( new Float32Array( c.geometry.attributes.position.count * 4 ), 4, false ),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\t// disconnect all light targets from parents because that's what happens after a clone which\n\t\t// is needed to match the model viewer setup\n\t\ttargetsToDisconnect.forEach( t => {\n\n\t\t\tt.removeFromParent();\n\n\t\t} );\n\n\t\t// add a parent group to process the parent offset\n\t\tconst targetGroup = new Group();\n\t\ttargetGroup.position.set( - target.x, - target.y, - target.z );\n\t\ttargetGroup.add( model );\n\n\t\tmodel = targetGroup;\n\t\tmodel.updateMatrixWorld( true );\n\n\t\tconst generator = new PathTracingSceneWorker();\n\t\tconst result = await generator.generate( model, { onProgress: v => {\n\n\t\t\tconst percent = Math.floor( 100 * v );\n\t\t\tloadingEl.innerText = `Building BVH : ${ percent }%`;\n\n\t\t} } );\n\n\t\tsceneInfo = result;\n\t\tscene.add( sceneInfo.scene );\n\n\t\tconst { bvh, textures, materials, lights } = result;\n\t\tconst geometry = bvh.geometry;\n\t\tconst material = ptRenderer.material;\n\n\t\tmaterial.bvh.updateFrom( bvh );\n\t\tmaterial.attributesArray.updateFrom(\n\t\t\tgeometry.attributes.normal,\n\t\t\tgeometry.attributes.tangent,\n\t\t\tgeometry.attributes.uv,\n\t\t\tgeometry.attributes.color,\n\t\t);\n\t\tmaterial.materialIndexAttribute.updateFrom( geometry.attributes.materialIndex );\n\t\tmaterial.textures.setTextures( renderer, 2048, 2048, textures );\n\t\tmaterial.materials.updateFrom( materials, textures );\n\t\tmaterial.envMapInfo.updateFrom( envMap );\n\t\tmaterial.lights.updateFrom( lights );\n\n\t\tgenerator.dispose();\n\n\t\tloadingEl.style.visibility = 'hidden';\n\n\t\tcreditEl.innerHTML = modelInfo.credit || '';\n\t\tcreditEl.style.visibility = modelInfo.credit ? 'visible' : 'hidden';\n\t\tbuildGui();\n\n\t\tgeometry.computeBoundingSphere();\n\n\t\t// mirror the model-viewer near / far planes\n\t\tconst radius = Math.max( orbit.radius, geometry.boundingSphere.radius );\n\t\tcamera.near = 2 * radius / 1000;\n\t\tcamera.far = 2 * radius;\n\t\tcamera.updateProjectionMatrix();\n\t\tcamera.position.setFromSphericalCoords( orbit.radius, MathUtils.DEG2RAD * orbit.phi, MathUtils.DEG2RAD * orbit.theta );\n\n\t\tconst dpr = window.devicePixelRatio;\n\t\tconst { width, height } = dimensions;\n\t\trenderer.setSize( width, height );\n\t\trenderer.setPixelRatio( dpr );\n\t\tptRenderer.setSize( width * dpr * params.scale, height * dpr * params.scale );\n\t\tcamera.aspect = width / height;\n\t\tcamera.fov = verticalFoV;\n\t\tcamera.updateProjectionMatrix();\n\n\t\tcontrols.update();\n\t\tscene.updateMatrixWorld();\n\t\tcamera.updateMatrixWorld();\n\n\t\tenvMap.mapping = EquirectangularReflectionMapping;\n\t\tscene.environment = envMap;\n\t\tif ( renderSkybox ) {\n\n\t\t\tscene.background = envMap;\n\t\t\tptRenderer.material.backgroundAlpha = 1;\n\n\t\t} else {\n\n\t\t\trenderer.setClearAlpha( 0 );\n\t\t\tscene.background = null;\n\t\t\tptRenderer.material.backgroundAlpha = 0;\n\n\t\t}\n\n\t\tptRenderer.reset();\n\n\t\tcontainerEl.style.display = 'flex';\n\t\tloadingModel = false;\n\t\tif ( params.checkerboardTransparency ) {\n\n\t\t\tcontainerEl.classList.add( 'checkerboard' );\n\n\t\t}\n\n\t};\n\n\tlet modelUrl = new URL( modelInfo.model, BASE_URL ).toString();\n\tmodelUrl = modelUrl.replace( /.*?glTF-Sample-Models/, 'https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master' );\n\n\tmanager.onLoad = onFinish;\n\n\tconst envUrl = new URL( lighting, BASE_URL ).toString();\n\tnew RGBELoader( manager )\n\t\t.load( envUrl, res => {\n\n\t\t\tenvMap = res;\n\n\t\t} );\n\n\tnew GLTFLoader( manager )\n\t\t.setMeshoptDecoder( MeshoptDecoder )\n\t\t.load(\n\t\t\tmodelUrl,\n\t\t\tgltf => {\n\n\t\t\t\tmodel = gltf.scene;\n\n\t\t\t},\n\t\t\tprogress => {\n\n\t\t\t\tif ( progress.total !== 0 && progress.total >= progress.loaded ) {\n\n\t\t\t\t\tconst percent = Math.floor( 100 * progress.loaded / progress.total );\n\t\t\t\t\tloadingEl.innerText = `Loading : ${ percent }%`;\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t);\n\n}\n\nfunction updateImage() {\n\n\timgEl.src = `https://raw.githubusercontent.com/google/model-viewer/master/packages/render-fidelity-tools/test/goldens/${ params.model }/${ params.imageType }-golden.png`;\n\n}\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n"],"names":["$ilwiq","parcelRequire","$5aae44c9b1864d53$var$Stats","mode","container","document","createElement","addPanel","panel","appendChild","dom","showPanel","id","i","children","length","style","display","cssText","addEventListener","event","preventDefault","beginTime","performance","Date","now","prevTime","frames","fpsPanel","Panel","msPanel","self","memory","memPanel","REVISION","begin","end","time","update","usedJSHeapSize","jsHeapSizeLimit","this","domElement","setMode","name","fg","bg","min","Infinity","max","round","Math","PR","window","devicePixelRatio","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","canvas","width","height","context","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","value","maxValue","drawImage","$5aae44c9b1864d53$export$2e2bcd8739ae039","$f6c83a1fcfd19596$var$BASE_URL","$f6c83a1fcfd19596$var$urlParams","URLSearchParams","location","search","$f6c83a1fcfd19596$var$maxSamples","parseInt","get","$f6c83a1fcfd19596$var$hideUI","$f6c83a1fcfd19596$var$tiles","$f6c83a1fcfd19596$var$params","environmentIntensity","multipleImportanceSampling","acesToneMapping","tilesX","tilesY","samplesPerFrame","scale","model","checkerboardTransparency","enable","bounces","transmissiveBounces","pause","displayImage","imageMode","imageOpacity","imageType","$f6c83a1fcfd19596$var$creditEl","$f6c83a1fcfd19596$var$loadingEl","$f6c83a1fcfd19596$var$samplesEl","$f6c83a1fcfd19596$var$containerEl","$f6c83a1fcfd19596$var$imgEl","$f6c83a1fcfd19596$var$gui","$f6c83a1fcfd19596$var$stats","$f6c83a1fcfd19596$var$sceneInfo","$f6c83a1fcfd19596$var$renderer","$f6c83a1fcfd19596$var$camera","$f6c83a1fcfd19596$var$ptRenderer","$f6c83a1fcfd19596$var$fsQuad","$f6c83a1fcfd19596$var$controls","$f6c83a1fcfd19596$var$scene","$f6c83a1fcfd19596$var$models","$f6c83a1fcfd19596$var$loadingModel","$f6c83a1fcfd19596$var$delaySamples","$f6c83a1fcfd19596$var$animate","requestAnimationFrame","samples","opacity","position","render","floor","innerText","material","materials","updateFrom","textures","filterGlossyFactor","physicalCamera","updateMatrixWorld","l","autoClear","dispatchEvent","Event","$f6c83a1fcfd19596$var$resetRenderer","reset","async","$f6c83a1fcfd19596$var$updateModel","envMap","classList","remove","destroy","manager","LoadingManager","modelInfo","hash","orbit","target","dimensions","verticalFoV","renderSkybox","lighting","Object","assign","theta","phi","radius","x","y","z","visibility","$f6c83a1fcfd19596$var$updateImage","traverse","c","key","isTexture","dispose","scene","modelUrl","URL","toString","replace","onLoad","$kkvoh","ready","$4CEV9","MaterialReducer","process","targetsToDisconnect","isLight","push","geometry","hasAttribute","computeVertexNormals","attributes","tangent","$7ePFa","computeMikkTSpaceTangents","clone","normalScale","clearcoatNormalScale","setAttribute","BufferAttribute","Float32Array","count","forEach","t","removeFromParent","targetGroup","Group","set","add","generator","$cVdfP","PathTracingSceneWorker","result","generate","onProgress","v","percent","bvh","lights","attributesArray","normal","uv","color","materialIndexAttribute","materialIndex","setTextures","envMapInfo","innerHTML","credit","$jiuw3","GUI","keys","onChange","pathTracingFolder","addFolder","dpr","setSize","setDefine","Number","toneMapping","ACESFilmicToneMapping","NoToneMapping","comparisonFolder","resolutionFolder","tiles","open","$f6c83a1fcfd19596$var$buildGui","computeBoundingSphere","boundingSphere","near","far","updateProjectionMatrix","setFromSphericalCoords","MathUtils","DEG2RAD","setPixelRatio","aspect","fov","mapping","EquirectangularReflectionMapping","environment","background","backgroundAlpha","setClearAlpha","envUrl","$891vQ","RGBELoader","load","res","$7lx9d","GLTFLoader","setMeshoptDecoder","$kp7Te","MeshoptDecoder","gltf","progress","total","loaded","src","getElementById","querySelector","body","WebGLRenderer","antialias","outputEncoding","sRGBEncoding","physicallyCorrectLights","Scene","innerWidth","innerHeight","PerspectiveCamera","PathTracingRenderer","camera","alpha","PhysicalPathTracingMaterial","$RPVlj","FullScreenQuad","MeshBasicMaterial","map","texture","blending","CustomBlending","$5Rd1x","OrbitControls","scenarios","fetch","json","s","initialModel","modelName","substring","replaceAll","$f6c83a1fcfd19596$var$init"],"version":3,"file":"viewerTest.daf0f9c0.js.map"}
{"mappings":"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","sources":["example/graphing.js"],"sourcesContent":["import * as THREE from 'three';\nimport GUI from 'three/examples/jsm/libs/lil-gui.module.min.js';\nimport { GraphMaterial } from '../src/index.js';\nimport { ggxGLSL } from '../src/shader/bsdf/ggx.glsl.js';\nimport { utilsGLSL } from '../src/shader/common/utils.glsl.js';\nimport { mathGLSL } from '../src/shader/common/math.glsl.js';\n\nconst graphFunctionSnippet = /* glsl */`\n\t#include <common>\n\t${ mathGLSL }\n\t${ utilsGLSL }\n\t${ ggxGLSL }\n\n\tvec4 graphFunction( float x ) {\n\n\t\tvec3 wi = normalize( vec3( 1.0, 1.0, 1.0 ) );\n\t\tvec3 halfVec = vec3( 0.0, 0.0, 1.0 );\n\t\tfloat theta = dot( wi, halfVec );\n\n\t\treturn vec4(\n\t\t\tggxPDF( wi, halfVec, x ),\n\t\t\tggxDistribution( halfVec, x ),\n\t\t\tggxShadowMaskG1( theta, x ),\n\t\t\tggxLamda( theta, x )\n\t\t);\n\n\t}\n`;\n\nlet camera, scene, renderer, plane;\nlet cameraCenter;\nlet zoom = 10;\nlet dataEl, dataContainerEl;\nconst params = {\n\taspect: 1,\n\tdisplayX: true,\n\tdisplayY: true,\n\tdisplayZ: true,\n\tdisplayW: true,\n\treset() {\n\n\t\tzoom = 10;\n\t\tcameraCenter.set(\n\t\t\t- zoom * 0.5 + zoom * 0.05,\n\t\t\tgetAspect() * zoom * 0.5 - zoom * 0.05,\n\t\t);\n\n\t}\n};\n\ninit();\n\n// init\nasync function init() {\n\n\tdataContainerEl = document.getElementById( 'dataContainer' );\n\tdataEl = document.getElementById( 'data' );\n\n\t// renderer init\n\trenderer = new THREE.WebGLRenderer( { antialias: true } );\n\trenderer.setSize( window.innerWidth, window.innerHeight );\n\trenderer.setClearColor( 0x11161C );\n\trenderer.setPixelRatio( window.devicePixelRatio );\n\trenderer.outputEncoding = THREE.sRGBEncoding;\n\trenderer.setAnimationLoop( animation );\n\tdocument.body.appendChild( renderer.domElement );\n\n\t// init camera\n\tcamera = new THREE.OrthographicCamera();\n\tcamera.position.set( 0, 0, 1.5 );\n\n\tscene = new THREE.Scene();\n\n\tcameraCenter = new THREE.Vector2();\n\n\t// image plane\n\tplane = new THREE.Mesh(\n\t\tnew THREE.PlaneGeometry(),\n\t\tnew GraphMaterial( {\n\t\t\tside: THREE.DoubleSide,\n\t\t\tthickness: 1,\n\t\t\tgraphFunctionSnippet,\n\t\t} )\n\t);\n\tplane.scale.setScalar( 2.0 );\n\tscene.add( plane );\n\n\tcameraCenter.set(\n\t\t- zoom * 0.5 + zoom * 0.05,\n\t\tgetAspect() * zoom * 0.5 - zoom * 0.05,\n\t);\n\n\tconst gui = new GUI();\n\tgui.add( plane.material, 'dim' );\n\tgui.add( plane.material, 'thickness', 0.5, 10.0 );\n\tgui.add( params, 'aspect', 0.1, 2 );\n\tgui.add( params, 'reset' );\n\n\tconst graphFolder = gui.addFolder( 'graphs' );\n\tgraphFolder.add( params, 'displayX' ).name( 'display graph 1' );\n\tgraphFolder.add( params, 'displayY' ).name( 'display graph 2' );\n\tgraphFolder.add( params, 'displayZ' ).name( 'display graph 3' );\n\tgraphFolder.add( params, 'displayW' ).name( 'display graph 4' );\n\n\tlet clicked = false;\n\tlet prevX = - 1;\n\tlet prevY = - 1;\n\trenderer.domElement.addEventListener( 'pointerleave', () =>{\n\n\t\tdataContainerEl.style.visibility = 'hidden';\n\n\t} );\n\n\trenderer.domElement.addEventListener( 'pointerenter', () =>{\n\n\t\tdataContainerEl.style.visibility = 'visible';\n\n\t} );\n\n\trenderer.domElement.addEventListener( 'pointerdown', e => {\n\n\t\tclicked = true;\n\t\tprevX = e.clientX;\n\t\tprevY = e.clientY;\n\n\t} );\n\n\trenderer.domElement.addEventListener( 'pointermove', e => {\n\n\t\tclicked = clicked && Boolean( e.buttons & 1 );\n\t\tif ( clicked ) {\n\n\t\t\tconst deltaX = e.clientX - prevX;\n\t\t\tconst deltaY = e.clientY - prevY;\n\n\t\t\tprevX = e.clientX;\n\t\t\tprevY = e.clientY;\n\n\t\t\tconst xWidth = 1;\n\t\t\tconst yWidth = getAspect();\n\n\t\t\tconst graphDeltaX = zoom * xWidth * deltaX / window.innerWidth;\n\t\t\tconst graphDeltaY = zoom * yWidth * deltaY / window.innerHeight;\n\n\t\t\tcameraCenter.x += graphDeltaX;\n\t\t\tcameraCenter.y += graphDeltaY;\n\n\t\t}\n\n\t\tdataContainerEl.style.left = `${ e.clientX }px`;\n\t\tdataContainerEl.style.top = `${ e.clientY }px`;\n\n\t\tconst data = mouseToGraphValue( e.clientX, e.clientY );\n\t\tdataEl.innerText = `x: ${ data.x.toFixed( 3 ) }\\ny: ${ data.y.toFixed( 3 ) }`;\n\n\t} );\n\n\trenderer.domElement.addEventListener( 'wheel', e => {\n\n\t\tconst mouseX = e.clientX;\n\t\tconst mouseY = e.clientY;\n\n\t\tconst xWidth = 1;\n\t\tconst yWidth = getAspect();\n\n\t\tconst centerRelX = ( mouseX / window.innerWidth ) - 0.5;\n\t\tconst centerRelY = ( mouseY / window.innerHeight ) - 0.5;\n\n\t\tconst graphX = zoom * xWidth * centerRelX;\n\t\tconst graphY = zoom * yWidth * centerRelY;\n\n\t\tconst beforeZoom = zoom;\n\t\tconst delta = Math.pow( 0.95, 1.0 );\n\n\t\tif ( e.deltaY < 0 ) {\n\n\t\t\tzoom *= delta;\n\n\t\t} else {\n\n\t\t\tzoom /= delta;\n\n\t\t}\n\n\t\tzoom = Math.max( zoom, 0.1 );\n\t\tzoom = Math.min( zoom, 100 );\n\n\t\tconst afterX = graphX * zoom / beforeZoom;\n\t\tconst afterY = graphY * zoom / beforeZoom;\n\n\t\tcameraCenter.x -= graphX - afterX;\n\t\tcameraCenter.y -= graphY - afterY;\n\n\t} );\n\n\twindow.addEventListener( 'resize', () => {\n\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n\t} );\n\n}\n\n// animation\nfunction animation() {\n\n\tconst mat = plane.material;\n\tconst xWidth = 1;\n\tconst yWidth = getAspect();\n\n\tmat.xRange.set(\n\t\t- cameraCenter.x - 0.5 * xWidth * zoom,\n\t\t- cameraCenter.x + 0.5 * xWidth * zoom,\n\t);\n\n\tmat.yRange.set(\n\t\tcameraCenter.y - 0.5 * yWidth * zoom,\n\t\tcameraCenter.y + 0.5 * yWidth * zoom,\n\t);\n\n\tmat.graphDisplay.set(\n\t\tNumber( params.displayX ),\n\t\tNumber( params.displayY ),\n\t\tNumber( params.displayZ ),\n\t\tNumber( params.displayW ),\n\t);\n\n\trenderer.render( scene, camera );\n\n}\n\nfunction getAspect() {\n\n\treturn params.aspect * window.innerHeight / window.innerWidth;\n\n}\n\nfunction mouseToGraphValue( x, y ) {\n\n\tconst xWidth = 1;\n\tconst yWidth = getAspect();\n\n\tconst centerRelX = ( x / window.innerWidth ) - 0.5;\n\tconst centerRelY = ( y / window.innerHeight ) - 0.5;\n\n\tconst graphX = zoom * xWidth * centerRelX - cameraCenter.x;\n\tconst graphY = zoom * yWidth * centerRelY - cameraCenter.y;\n\n\treturn { x: graphX, y: - graphY };\n\n}\n"],"names":["$ilwiq","parcelRequire","$7f018191b657fea8$var$graphFunctionSnippet","mathGLSL","$6T5Sj","utilsGLSL","$bkGXj","ggxGLSL","$7f018191b657fea8$var$camera","$7f018191b657fea8$var$scene","$7f018191b657fea8$var$renderer","$7f018191b657fea8$var$plane","$7f018191b657fea8$var$cameraCenter","$7f018191b657fea8$var$dataEl","$7f018191b657fea8$var$dataContainerEl","$7f018191b657fea8$var$zoom","$7f018191b657fea8$var$params","aspect","displayX","displayY","displayZ","displayW","reset","set","$7f018191b657fea8$var$getAspect","$7f018191b657fea8$var$animation","mat","material","yWidth","xRange","x","yRange","y","graphDisplay","Number","render","window","innerHeight","innerWidth","async","document","getElementById","WebGLRenderer","antialias","setSize","setClearColor","setPixelRatio","devicePixelRatio","outputEncoding","sRGBEncoding","setAnimationLoop","body","appendChild","domElement","OrthographicCamera","position","Scene","Vector2","Mesh","PlaneGeometry","$4CEV9","GraphMaterial","side","DoubleSide","thickness","graphFunctionSnippet","scale","setScalar","add","gui","$jiuw3","default","graphFolder","addFolder","name","clicked","prevX","prevY","addEventListener","style","visibility","e","clientX","clientY","Boolean","buttons","deltaX","deltaY","xWidth","graphDeltaX","graphDeltaY","left","top","data","centerRelX","centerRelY","graphX","graphY","$7f018191b657fea8$var$mouseToGraphValue","innerText","toFixed","mouseX","mouseY","beforeZoom","delta","Math","pow","max","min","afterX","afterY","$7f018191b657fea8$var$init"],"version":3,"file":"graphing.63853722.js.map"}
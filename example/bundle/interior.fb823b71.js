var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequire5b70;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,a.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5b70=a);var o=a("ilwiq"),r=a("RPVlj"),i=a("7lx9d"),s=a("5Rd1x"),l=a("4CEV9"),d=a("cVdfP"),c=a("891vQ"),m=a("kp7Te"),u=a("jiuw3");let p,h,g,w,b,f,v,y,x,P,C;const E={environmentIntensity:0,environmentRotation:0,emissiveIntensity:12,bounces:20,samplesPerFrame:1,resolutionScale:1/window.devicePixelRatio,filterGlossyFactor:.25,tiles:2,cameraProjection:"Perspective"};window.location.hash.includes("transmission")&&(E.material1.metalness=0,E.material1.roughness=.05,E.material1.transmission=1,E.material1.color="#ffffff",E.bounces=10);const F=window.innerWidth/window.innerHeight;function M(){const e=window.innerWidth,t=window.innerHeight,n=E.resolutionScale,a=window.devicePixelRatio;b.setSize(e*n*a,t*n*a),b.reset(),p.setSize(e,t),p.setPixelRatio(window.devicePixelRatio*n);const o=e/t;y.aspect=o,y.updateProjectionMatrix();const r=5/o;x.top=r/2,x.bottom=r/-2,x.updateProjectionMatrix()}function R(){w.materials.forEach((e=>{e.emissiveIntensity=E.emissiveIntensity})),b.reset()}function I(e){"Perspective"===e?(f===x&&y.position.copy(f.position),f=y,h.object=f):"Orthographic"===e&&(f===y&&x.position.copy(f.position),f=x,h.object=f),"Equirectangular"===e?(f=P,h.enabled=!1,g.enabled=!0,g.update()):(g.enabled=!1,h.enabled=!0,h.update()),b.camera=f,window.CAMERA=f,b.reset()}function T(){requestAnimationFrame(T),b.material.materials.updateFrom(w.materials,w.textures),b.material.filterGlossyFactor=E.filterGlossyFactor,b.material.environmentIntensity=E.environmentIntensity,b.material.environmentBlur=.35,b.material.bounces=E.bounces,f.updateMatrixWorld();for(let e=0,t=E.samplesPerFrame;e<t;e++)b.update();p.autoClear=!1,v.render(p),p.autoClear=!0,C.innerText=`Samples: ${Math.floor(b.samples)}`}F<.65&&(E.bounces=Math.min(E.bounces,10),E.resolutionScale*=.5,E.tiles=3),async function(){p=new o.WebGLRenderer({antialias:!0}),p.toneMapping=o.ACESFilmicToneMapping,p.outputEncoding=o.sRGBEncoding,document.body.appendChild(p.domElement),y=new o.PerspectiveCamera(75,F,.025,500),y.position.set(.4,.6,2.65);const e=5/F;x=new o.OrthographicCamera(-2.5,2.5,e/2,e/-2,0,100),x.position.copy(y.position),P=new l.EquirectCamera,P.position.set(-.2,.33,.08),b=new l.PathTracingRenderer(p),b.material=new l.PhysicalPathTracingMaterial,b.tiles.set(E.tiles,E.tiles),v=new r.FullScreenQuad(new o.MeshBasicMaterial({map:b.target.texture})),h=new s.OrbitControls(y,p.domElement),h.target.set(-.15,.33,-.08),y.lookAt(h.target),h.addEventListener("change",(()=>{b.reset()})),h.update(),g=new s.OrbitControls(P,p.domElement),g.target.set(-.15,.33,-.08),P.lookAt(g.target),g.addEventListener("change",(()=>{b.reset()})),g.update(),C=document.getElementById("samples");const t=(new c.RGBELoader).setDataType(o.FloatType).loadAsync("https://raw.githubusercontent.com/mrdoob/three.js/dev/examples/textures/equirectangular/royal_esplanade_1k.hdr").then((e=>{b.material.envMapInfo.updateFrom(e)})),n=new d.PathTracingSceneWorker,a=(new i.GLTFLoader).setMeshoptDecoder(m.MeshoptDecoder).loadAsync("https://raw.githubusercontent.com/gkjohnson/3d-demo-data/main/models/pathtracing-bathroom/modernbathroom.glb").then((e=>{e.scene.traverse((e=>{e.material&&(e.material.thickness=1)}));const t=new o.Group;t.add(e.scene);const a=new o.Box3;a.setFromObject(e.scene),t.updateMatrixWorld();const r=new o.Vector3;return a.getCenter(r),e.scene.position.addScaledVector(r,-.5),t.updateMatrixWorld(),n.generate(t)})).then((e=>{w=e;const{bvh:t,textures:a,materials:o}=e,r=t.geometry,i=b.material;i.bvh.updateFrom(t),i.attributesArray.updateFrom(r.attributes.normal,r.attributes.tangent,r.attributes.uv,r.attributes.color),i.materialIndexAttribute.updateFrom(r.attributes.materialIndex),i.textures.setTextures(p,2048,2048,a),i.materials.updateFrom(o,a),n.dispose()}));await Promise.all([a,t]),document.getElementById("loading").remove(),M(),window.addEventListener("resize",M),I(E.cameraProjection);const f=new u.GUI;f.add(E,"tiles",1,4,1).onChange((e=>{b.tiles.set(e,e)})),f.add(E,"samplesPerFrame",1,10,1),f.add(E,"filterGlossyFactor",0,1).onChange((()=>{b.reset()})),f.add(E,"environmentIntensity",0,25).onChange((()=>{b.reset()})),f.add(E,"environmentRotation",0,40).onChange((e=>{b.material.environmentRotation.makeRotationY(e),b.reset()})),f.add(E,"emissiveIntensity",0,50).onChange(R),f.add(E,"bounces",1,30,1).onChange((()=>{b.reset()})),f.add(E,"resolutionScale",.1,1).onChange((()=>{M()})),f.add(E,"cameraProjection",["Perspective","Orthographic","Equirectangular"]).onChange((e=>{I(e)})),R(),T()}();
//# sourceMappingURL=interior.fb823b71.js.map
